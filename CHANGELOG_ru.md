# (MODX)EvolutionCMS.snippets.ddGetMultipleField changelog


## Версия 3.9 (2023-01-11)
* \+ Параметры → `inputString`: Также может быть задан, как [HJSON](https://hjson.github.io/) или [Query formatted string](https://en.wikipedia.org/wiki/Query_string).
* \* Параметры → `outerTpl`: Плейсхолдеры `[+rowY.colX+]` работают нормально даже если исходный объект имеет произвольные строковые ключи.


## Версия 3.8.2 (2022-08-10)
* \* Параметры:
	* \* `columns`: Исправлена некорректная работа со значением `0`.
	* \* `colTpl`: Исправлена некорректная работа с пустым значением.


## Версия 3.8.1 (2022-06-09)
* \* Параметры → `colTpl`: Улучшена поддержка различного количества колонок в разных строках.


## Версия 3.8 (2022-06-04)
* \* Параметры:
	* \+ `inputString`: Поддерживает JSON с любым уровнем вложенности.
	* \+ `colTpl[$i]` → Плейсхолдеры:
		* \+ `[+columnIndex+]`: Новый плейсхолдер. Содержит номер колонки, начинающийся с `0`.
		* \+ `[+columnKey+]`: Новый плейсхолдер. Содержит ключ колонки. Полезно для объектов или ассоциативных массивов в `inputString`, для индексировнных массивов плейсхолдер эквивалентен `[+columnIndex+]`.
		* \+ `[+val+]`: Если значение колонки является массивом/объектом, оно будет сконвертировано в строку JSON (это полезно, когда `inputString` содержит JSON с более чем 2 уровнями вложенности).
	* \+ `rowTpl` → Плейсхолдеры:
		* \+ `[+allColumnValues+]`: Новый плейсхолдер. Содержит значения всех колонок, объединённые через `colGlue`. См. README → Примеры.
		* \+ `[+`_columnKey_`+]`: Новый набор плейсхолдеров, где _columnKey_ — оригинальный ключ колонки. См. README → Примеры.
	* \* `removeEmptyCols`: Работает нормально, даже если оба параметра `rowTpl` и `colTpl` не заданы.


## Версия 3.7 (2021-10-05)
* \+ Параметры → `rowTpl`, `colTpl[i]`: Добавлен новый плейсхолдер `[+rowKey+]` (см. README).
* \+ Параметры → `colTpl[i]`: Добавлены новые плейсхолдеры `[+total+]` и `[+resultTotal+]` (см. README).


## Версия 3.6 (2021-06-28)
* \* Внимание! Требуется PHP >= 5.6.
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.50.
* \* Внимание! Требуется (MODX)EvolutionCMS.snippets.ddTypograph >= 2.5.
* \+ Параметры:
	* \+ `placeholders`: Также может быть задан, как [HJSON](https://hjson.github.io/) или как нативный PHP объект или массив (например, для вызовов через `$modx->runSnippet`).
	* \+ `columns`, `sortBy`, `typography`, `colTpl`: Также могут быть заданы, как нативные PHP массивы (например, для вызовов через `$modx->runSnippet`).
* \+ Запустить сниппет без DB и eval можно через `\DDTools\Snippet::runSnippet` (см. примеры в README).
* \+ `\ddGetMultipleField\Snippet`: Новый класс. Весь код сниппета перенесён туда.
* \* `\DDTools\Snippet::runSnippet` используется вместо `$modx->runSnippet` для запуска (MODX)EvolutionCMS.snippets.ddTypograph без DB и eval.
* \- Удалена совместимость с древними версиями (MODX)EvolutionCMS.libraries.ddTools.
* \+ README:
	* \+ Документация → Установка → Используя (MODX)EvolutionCMS.libraries.ddInstaller.
	* \+ Ссылки.
* \+ Composer.json:
	* \+ `support`.
	* \+ `authors`: Добавлены недостающие ссылки.


## Версия 3.5.1 (2020-06-22)
* \* Улучшена совместимость с новыми версиями (MODX)EvolutionCMS.libraries.ddTools.


## Версия 3.5 (2020-05-25)
* \+ Параметры → `inputString`: Также может быть и JSON объектом, не только массивом.
* \* Параметры → `filter`:
	* \* Оператор «равно» изменён на `==` с `::` (с обратной совместимостью).
	* \+ Добавлен оператор «не равно» (`!=`).
	* \+ Добавлено условие «и» (`&&`).
	* \+ Значения можно оборачивать в кавычки.
	* \+ Можно использовать пробелы, табы и переносы строк.
* \+ Composer.json.
* \+ README.
* \+ README_ru.
* \+ CHANGELOG.
* \+ CHANGELOG_ru.


## Версия 3.4 (2018-11-14)
* \+ Параметры → `placeholders`:
	* \+ Добавлена поддержка массивов
	* \+ Добавлена поддержка формата JSON.
* \+ Параметры → `inputString`: Добавлена поддержка формата JSON.
* \* Следующие параметры переименованы (старые имена пока поддерживаются, но не рекомендуются к использованию):
	* \* `rowDelimiter` → `inputString_rowDelimiter`.
	* \* `colDelimiter` → `inputString_colDelimiter`.


## Версия 3.3 (2016-06-06)
* \+ Параметры → `outerTpl`, `rowTpl`, `colTpl`: Добавлена возможность использовать встроенные шаблоны, используя префикс `'@CODE:'`.
* \+ Параметры → `rowTpl`, `colTpl`: Дополнительные данные из параметра `placeholders` теперь также будут переданы в шаблоны строк и колонок.
* \* Параметры → `placeholders`: Дополнительные данные, передаваемые в параметр `placeholders` должны быть в виде Query string (старый формат поддерживается, но не рекомендуется к использвоанию).
* \* Следующие параметры переименованы (старые имена пока поддерживаются, но не рекомендуются к использованию):
	* \* `string` → `inputString`.
	* \* `docField` → `inputString_docField`.
	* \* `docId` → `inputString_docId`.
* \* Рефакторинг: Результат сниппета будет возвращён в любом случае (пустая строка для пустого результата).


## Версия 3.2 (2015-06-23)
* \+ Параметры → `colTpl:` Плэйсхолдер `[+rowNumber+]` также доступен в шаблонах колонок.
* \+ Параметры → `rowTpl`, `colTpl`: Доступен довый плэйсхолдер `[+rowNumber.zeroBased+]` — номер строки, начинающийся с 0, это бывает удобно.
* \* Рефакторинг:
	* \* Шаблоны колонок обрабатываются только если они используются.
	* \* Параметры `sortBy` и `sortDir` обрабатываются только если они используются.
	* \* Параметры `startRow` и `totalRows` обрабатываются только если они используются.
	* \* Переименованы некоторые внутренние переменные.


## Версия 3.1 (2014-07-03)
* \+ Параметры → `outputFormat`: Добавлен формат вывода `htmlarray` — одномерный массив, элементы которого — готовые полностью обработанные строки. Как и `array`, имеет смысл использовать вместе с параметром `resultToPlaceholder`.


## Версия 3.0b (2014-03-02)
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.11.
* \* Вместо локальной функции для сортировки используется метод `\ddTools:sort2dArray`.
* \* Значение поля получается при помощи метода `\ddTools:getTemplateVarOutput`, (MODX)EvolutionCMS.snippets.ddGetDocumentField больше не используется.
* \* Параметры переименованы, изменены их описания и порядок:
	* \* `field` → `string`.
	* \* `getField` → `docField`.
	* \* `getId` → `docId`.
	* \* `splY` → `rowDelimiter`.
	* \* `splX` → `colDelimiter`.
	* \* `num` → `startRow`.
	* \* `count` → `totalRows`.
	* \* `colNum` → `columns`.
	* \* `vals` → `filter`.
	* \* `typographing` → `typography`.
	* \* `format` → `outputFormat`.
	* \* `glueY` → `rowGlue`.
	* \* `glueX` → `colGlue`.
	* \* `tplY` → `rowTpl`.
	* \* `tplX` → `colTpl`.
	* \* `tplWrap` → `outerTpl`.
	* \* `totalPlaceholder` → `totalRowsToPlaceholder`.
* \* Параметры → `typography`:
	* \* Типографируется теперь не весь результат работы сниппета, а каждое значение по отдельности.
	* \* Параметр принимает не булевое значение, а список колонок через запятую, значения которых нужно типографировать.
* \* Параметры → `rowTpl`:
	* \* Плэйсхолдер `[+row_number+]` переименован в `[+rowNumber+]`.
	* \* Плэйсхолдеры вида `[+valX+]` переименованы в `[+colX+]`.
* \* Параметры → `outerTpl`:
	* \* Плэйсхолдер `[+wrapper+]` переименован в `[+result+]`.
	* \* Плэйсхолдеры вида `[+rowY.valX+]` переименованы в `[+rowY.colX+]`.
* \* Параметры → `resultToPlaceholder`: Параметр принимает не булевое значение, а имя плэйсхолдера.
* \* Небольшие исправления, изменения стиля кода и прочие изменения.


## Версия 2.18 (2013-11-11)
* \* Внимание! Требуется (MODX)EvolutionCMS.libraries.ddTools >= 0.10.
* \+ Параметры → `tplWrap`, `tplY`: Добавлен плэйсхолдер `[+resultTotal+]`, содержащий количество **возвращаемых** элементов.
* \* Параметры → `tplWrap`:
	* \* Исправлена ошибка, плэйсхолдер `[+total+]` появлялся только если задан параметр `placeholders`.
	* \+ Доступны плэйсхолдеры вида `[+rowY.valX+]` (где `Y` — номер строки, `X` — номер колонки), содержащие все значения.
* \* Внимание! В плэйсхолдер `[+total+]` теперь возвращается общее количество **всех** элементов.
* \* Незначительные изменения кода.


## Версия 2.17 (2013-09-18)
* \+ Параметры → `vals`: Добавлена фильтрация по всем колонкам.


## Версия 2.16.2 (2013-07-11)
* \* При сортировке добавлена обработка числовых значений, теперь они сравниваются как числа, а не как строки.


## Версия 2.16.1 (2013-06-13)
* \* Исправлена ошибка с обращением к не объявленным переменным (PHP >= 5.3).


## Версия 2.16 (2013-03-28)
* \* Внимание! Требуется (MODX)EvolutionCMS.snippets.ddGetDocumentField >= 2.4.
* \+ Параметры → `tplWrap`: Плэйсхолдер `[+total+]` теперь выводится и здесь.
* \+ Параметры → `splY`, `splX`: Теперь могут принимать регулярные выражения.
* \+ Параметры → `resultToPlaceholder`: Новый параметр. Добавлена возможность сохранять результаты сниппета в плэйсхолдер.
* \+ Параметры → `format`: Добавлена возможность вывода в формате массива (полезно при запуске через `$modx->runSnippet` или при сохранении результата в плэйсхолдер).
* \- Параметры → `getPublished`: За ненадобностью удалён параметр. Теперь наконец без разницы, опубликован ли документ.


## Версия 2.15 (2013-02-11)
* \+ Параметры → `totalPlaceholder`: Новый параметр. Добавлена возможность выводить общее количество строк во внешний плэйсхолдер.


## Версия 2.14 (2013-01-10)
* \+ Параметры → `tplY`: Добавлен плэйсхолдер `[+total+]`, содержащий общее количество строк.


## Версия 2.13 (2012-09-03)
* \+ Параметры → `sortDir`: Добавлено возможное значение `'REVERSE'`, при котором значения выводятся просто в обратном порядке.


<link rel="stylesheet" type="text/css" href="https://DivanDesign.ru/assets/files/ddMarkdown.css" />
<style>ul{list-style:none;}</style>